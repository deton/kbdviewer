漢直Win 1.27
============

「漢直Win 1.26eb」からの主な変更点は、以下の通りです。

主な変更点
----------

* 再帰的な部首合成

  1.26eb 版で木原英人さんにより部首合成機能が追加されましたが、
  さらに、再帰的な部首合成ができるようになりました。
  「◆◆上七リ」→「劇」のような合成が可能です。
  また、交ぜ書き変換と部首合成を組み合わせることもできます (前置型のみ)。

  ※ 前置型変換の中での後置型変換は未対応です。
  技術的には可能だと思いますがそこまでは書いていません。

* ヒストリ入力

  部首合成や交ぜ書き変換で入力した外字を再入力するための機能です。
  変換入力した文字 (列) のうち最近の 10 候補を対象に、
  「ヒストリ入力の呼び出しキー + 選択キー」の擬似 2 ストロークで
  入力できます。
  付属の T-Code テーブルでは、「:」(106 配列の場合) または「'」(101 配
  列の場合) に、この機能が割り当てられています。

  ※ 頻出する外字 (特に記号類) を繰り返し入力する場合を想定しています。
  もっとも、標準の T-Code では外字の出現頻度がかなり高いため
  候補がすぐに上書きされてしまい、あまり役に立たないかも知れません。

  ※ [tcode-ml:312] の岡俊行さんの記事にあるアイデアを
  試験的に実装してみました。
  元記事からの引用:
  > 私としては、苦労して部首合成入力した文字をなんらかの形でキャッシュして
  > おけるといいなと思うことが多々あります。たとえば、\0や\1で呼び出せるとか。

* 活用語の交ぜ書き変換

  読みに「―」を付加しなくても活用語の変換ができます。
  といっても、単に交ぜ書き変換辞書から「―」を付加した読みを implicit
  に引くだけです。活用語の変換は語幹の読みで指定する必要があります。

* シフト打鍵によるかたかな入力

  設定ファイルで「shiftKana=1」オプションを指定すると、
  シフトを押しながらひらがなを打鍵するとかたかなが入力できます。

  ※ 主に TUT-Code で使用することを想定しています。

  ※ [tcode-ml:2358] の木原英人さんの記事
  「漢直 Win 1.26eb 用シフトキー対応パッチ」を真似てみました。
  ただし、手を抜いてるので、本来シフトキーを用いて入力する文字
  (特に ! や ?) が入力できなくなります。

* キャレット (カーソル) 追従機能

  設定ファイルで「followCaaret=1」オプションを指定すると、
  「漢直窓」のウィンドウがカーソルに追従して動くようになります。
  ただし、対象ソフトによっては動作しません。

  ※ 『【原理】T-Code連習マラソン【主義】』
  <http://pc.2ch.net/test/read.cgi/unix/1014523030/>
  の 816 氏のコードを参考にさせていただきました。ありがとうございます。

* WM_CHAR/WM_IME_CHAR

  送出メッセージは WM_CHAR がデフォルトになりました。
  WM_IME_CHAR を使用するには、設定ファイルで「useWMIMECHAR=1」と
  指定します。

* 仮想鍵盤のウィンドウとアイコン

  ウィンドウやアイコンのデザインを勝手に変更しました。ごめんなさい。
  入力中の仮想鍵盤や文字ヘルプで、打鍵キーを彩色表示するように
  しました。
  また、ON/OFF トグルに対応して、タスクトレイのアイコンが変化します。

* 「漢索窓」(「漢索板」のクローン)

  「漢索板」は徳岡宏樹さん作のソフトで、「漢直Win」のテーブルを
  利用して、漢字のストロークを検索するソフトです。
  「漢直窓 1.27」では、テーブルファイルの互換性がなくなりつつあること
  もあり、クローンソフトの「漢索窓」を作成し付属することにしました。
  ただし、私の技術不足により、ウィンドウのリサイズに対応していないなど
  の機能制限があります。

  なお、オリジナルの「漢索板」のソースファイルは、公開されていない
  ようです。

* マニュアル

  1.26e 版以降の新機能に対応したマニュアル kanchoku.html を書きました。
  ファイルフォーマットなど、私の臆測で書いている部分があり、
  不正確な記述があるかも知れません。

* ソースファイル

  新設したファイル:
  - moji.[ch]		: MOJI 型と、バッファ関連
  - st_table.[ch]	: ストローク逆引きテーブル関連
  - tcode.[ch]	: ストローク入力関連
  - tc.h		: T-Code 関連の定義
  - kansaku.*		: 「漢索窓」

  名前の変更:
  - bushu_dic.[ch]	: comp.[ch] からリネーム
  - version.h		: value.h からリネーム

  廃止したコンパイルオプション:
  - ORIG	: 廃止
  - BUSHU	: 標準で指定したことになります
  - REVI	: 廃止

  makefile は Borland C++ Compiler 5.5
  <http://www.borland.co.jp/cppbuilder/freecompiler/> 用のものです。

その他の変更点については、マニュアル kanchoku.html をご覧ください。

----
ゆせよしひろ
2003/08/28
